<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>DepoOS â€“ GerÃ§ek ZamanlÄ± Depo ve SipariÅŸ YÃ¶netimi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Tailwind (geliÅŸtirme iÃ§in CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- SheetJS (Excel import iÃ§in ÅART) -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

  <!-- Basit font -->
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .backdrop-blur {
      backdrop-filter: blur(18px);
    }
  </style>
</head>
<body class="min-h-screen bg-slate-950 text-slate-50">

<!-- =========================================================
     AUTH SECTION
========================================================= -->
<section id="authSection" class="min-h-screen flex items-center justify-center px-4">
  <div class="w-full max-w-3xl bg-slate-900/60 border border-slate-800 rounded-3xl shadow-2xl p-6 md:p-8 backdrop-blur">
    <div class="flex items-center justify-between mb-6">
      <div>
        <h1 class="text-xl md:text-2xl font-semibold text-white tracking-tight">
          DepoOS
        </h1>
        <p class="text-xs md:text-sm text-slate-400 mt-1">
          GerÃ§ek zamanlÄ± depo ve sipariÅŸ yÃ¶netimi
        </p>
      </div>
      <span class="inline-flex h-10 w-10 items-center justify-center rounded-full bg-slate-800 text-sm font-semibold">
        D
      </span>
    </div>

    <!-- Sekmeli Login / KayÄ±t -->
    <div class="flex mb-4 rounded-full bg-slate-900/80 border border-slate-800 p-1">
      <button
        id="loginTab"
        class="flex-1 text-xs md:text-sm px-4 py-2 rounded-full bg-white shadow text-slate-900 font-medium transition"
        type="button"
      >
        GiriÅŸ Yap
      </button>
      <button
        id="registerTab"
        class="flex-1 text-xs md:text-sm px-4 py-2 rounded-full text-slate-500 font-medium transition"
        type="button"
      >
        KayÄ±t Ol
      </button>
    </div>

    <p
      id="authMessage"
      class="text-xs md:text-sm text-red-500 mb-4 h-4 flex items-center"
    ></p>

    <!-- Login Form -->
    <form id="loginForm" class="space-y-4">
      <div class="grid gap-3">
        <div>
          <label for="loginEmail" class="block text-xs text-slate-300 mb-1">
            E-posta
          </label>
          <input
            id="loginEmail"
            type="email"
            autocomplete="email"
            class="w-full rounded-2xl bg-slate-900/70 border border-slate-700 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-sky-500/80"
          />
        </div>
        <div>
          <label for="loginPassword" class="block text-xs text-slate-300 mb-1">
            Åifre
          </label>
          <input
            id="loginPassword"
            type="password"
            autocomplete="current-password"
            class="w-full rounded-2xl bg-slate-900/70 border border-slate-700 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-sky-500/80"
          />
        </div>
      </div>

      <button
        type="submit"
        class="w-full mt-2 inline-flex items-center justify-center rounded-2xl bg-sky-500 hover:bg-sky-400 text-xs md:text-sm font-semibold text-white py-2.5 transition"
      >
        GiriÅŸ Yap
      </button>
      <p class="text-[11px] text-slate-500 mt-2">
        Ä°lk kullanÄ±cÄ±yÄ± <span class="font-semibold text-slate-300">admin</span>
        rolÃ¼yle oluÅŸturup diÄŸer kullanÄ±cÄ±larÄ± oradan ekleyebilirsin.
      </p>
    </form>

    <!-- Register Form -->
    <form id="registerForm" class="space-y-4 hidden">
      <div class="grid md:grid-cols-2 gap-3">
        <div class="md:col-span-2">
          <label for="registerName" class="block text-xs text-slate-300 mb-1">
            Ad Soyad
          </label>
          <input
            id="registerName"
            type="text"
            class="w-full rounded-2xl bg-slate-900/70 border border-slate-700 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/80"
          />
        </div>
        <div>
          <label for="registerEmail" class="block text-xs text-slate-300 mb-1">
            E-posta
          </label>
          <input
            id="registerEmail"
            type="email"
            autocomplete="email"
            class="w-full rounded-2xl bg-slate-900/70 border border-slate-700 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/80"
          />
        </div>
        <div>
          <label for="registerPassword" class="block text-xs text-slate-300 mb-1">
            Åifre
          </label>
          <input
            id="registerPassword"
            type="password"
            autocomplete="new-password"
            class="w-full rounded-2xl bg-slate-900/70 border border-slate-700 px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/80"
          />
        </div>
        <div class="md:col-span-2">
          <label for="registerRole" class="block text-xs text-slate-300 mb-1">
            Rol
          </label>
          <select
            id="registerRole"
            class="w-full rounded-2xl bg-slate-900/70 border border-slate-700 px-3 py-2 text-xs text-white focus:outline-none focus:ring-2 focus:ring-emerald-500/80"
          >
            <option value="branch">Åube</option>
            <option value="picker">ToplayÄ±cÄ±</option>
            <option value="manager">Depo YÃ¶neticisi</option>
            <option value="admin">Admin</option>
          </select>
        </div>
      </div>

      <button
        type="submit"
        class="w-full mt-2 inline-flex items-center justify-center rounded-2xl bg-emerald-500 hover:bg-emerald-400 text-xs md:text-sm font-semibold text-white py-2.5 transition"
      >
        KayÄ±t Ol ve GiriÅŸ Yap
      </button>
    </form>
  </div>
</section>

<!-- =========================================================
     APP SECTION
========================================================= -->
<section id="appSection" class="min-h-screen flex flex-col hidden">
  <!-- Ãœst Bar -->
  <header
    class="w-full border-b border-slate-800 bg-slate-950/80 backdrop-blur px-3 md:px-6 py-2 flex items-center justify-between"
  >
    <div class="flex items-center gap-3">
      <div
        class="h-9 w-9 rounded-2xl bg-sky-500/10 border border-sky-500/40 flex items-center justify-center text-xs font-semibold text-sky-300"
      >
        D
      </div>
      <div>
        <p class="text-xs uppercase tracking-[0.18em] text-slate-500">
          DepoOS
        </p>
        <p class="text-[11px] md:text-xs text-slate-300">
          GerÃ§ek zamanlÄ± depo ve sipariÅŸ yÃ¶netimi
        </p>
      </div>
    </div>

    <div class="flex items-center gap-3">
      <!-- Bildirim butonu -->
      <div class="relative">
        <button
          id="notificationsBtn"
          type="button"
          class="relative h-9 w-9 rounded-full bg-slate-900/80 border border-slate-700 flex items-center justify-center text-slate-200 hover:bg-slate-800"
          aria-haspopup="true"
          aria-expanded="false"
          aria-controls="notificationsPanel"
          title="Bildirimler"
        >
          ğŸ””
          <span
            id="notificationsUnread"
            class="hidden absolute -top-1 -right-1 h-4 min-w-[16px] px-1 rounded-full bg-rose-500 text-[10px] font-semibold text-white flex items-center justify-center"
          ></span>
        </button>

        <div
          class="absolute right-0 mt-2 w-72 bg-slate-900 border border-slate-800 rounded-2xl shadow-xl p-2 hidden"
          id="notificationsPanel"
        >
          <div class="flex items-center justify-between mb-1">
            <p class="text-xs font-semibold text-slate-200">Bildirimler</p>
            <button
              id="notificationsMarkReadBtn"
              type="button"
              class="text-[11px] text-sky-400 hover:text-sky-300"
            >
              Hepsini okundu yap
            </button>
          </div>
          <ul
            id="notificationsList"
            class="max-h-60 overflow-y-auto space-y-1"
          >
            <li class="text-[11px] text-slate-400">HenÃ¼z bildirim yok.</li>
          </ul>
        </div>
      </div>

      <!-- KullanÄ±cÄ± -->
      <div class="hidden sm:flex flex-col items-end mr-2">
        <span
          id="currentUserInfo"
          class="text-xs text-slate-200 truncate max-w-[180px]"
        ></span>
        <span
          id="roleBadge"
          class="text-[11px] inline-flex items-center px-2 py-[2px] rounded-full bg-slate-800 text-slate-300 border border-slate-600 mt-0.5"
        >
          Rol: -
        </span>
      </div>

      <button
        id="logoutBtn"
        type="button"
        class="text-[11px] md:text-xs px-3 py-1.5 rounded-full bg-slate-900 border border-slate-700 text-slate-200 hover:bg-slate-800"
      >
        Ã‡Ä±kÄ±ÅŸ
      </button>
    </div>
  </header>

  <!-- Ana Ä°Ã§erik -->
  <div class="flex-1 flex flex-col">
    <!-- Navigation Tabs -->
    <nav
      class="w-full border-b border-slate-800 bg-slate-950/90 backdrop-blur px-3 md:px-6 py-2"
    >
      <div class="flex flex-wrap gap-2">
        <button
          type="button"
          class="nav-btn text-xs md:text-sm px-4 py-1.5 rounded-full bg-slate-900/70 text-white border border-slate-700"
          data-view="dashboardView"
          data-role="admin,manager,picker,branch"
        >
          Panel
        </button>
        <button
          type="button"
          class="nav-btn text-xs md:text-sm px-4 py-1.5 rounded-full bg-slate-900/30 text-slate-300 border border-slate-700/60"
          data-view="productsView"
          data-role="admin,manager"
        >
          ÃœrÃ¼nler
        </button>
        <button
          type="button"
          class="nav-btn text-xs md:text-sm px-4 py-1.5 rounded-full bg-slate-900/30 text-slate-300 border border-slate-700/60"
          data-view="stockView"
          data-role="admin,manager"
        >
          Stok Hareketleri
        </button>
        <button
          type="button"
          class="nav-btn text-xs md:text-sm px-4 py-1.5 rounded-full bg-slate-900/30 text-slate-300 border border-slate-700/60"
          data-view="ordersView"
          data-role="admin,manager,branch"
        >
          Åube SipariÅŸleri
        </button>
        <button
          type="button"
          class="nav-btn text-xs md:text-sm px-4 py-1.5 rounded-full bg-slate-900/30 text-slate-300 border border-slate-700/60"
          data-view="pickingView"
          data-role="admin,manager,picker"
        >
          Toplama
        </button>
        <button
          type="button"
          class="nav-btn text-xs md:text-sm px-4 py-1.5 rounded-full bg-slate-900/30 text-slate-300 border border-slate-700/60"
          data-view="loadingView"
          data-role="admin,manager"
        >
          AraÃ§ YÃ¼kleme
        </button>
        <button
          type="button"
          class="nav-btn text-xs md:text-sm px-4 py-1.5 rounded-full bg-slate-900/30 text-slate-300 border border-slate-700/60"
          data-view="reportsView"
          data-role="admin,manager"
        >
          Raporlar
        </button>
      </div>
    </nav>

    <!-- Global UyarÄ± -->
    <div class="px-3 md:px-6 mt-2">
      <div
        id="globalAlert"
        class="hidden border rounded-2xl px-3 py-2 text-[11px] md:text-xs"
      ></div>
    </div>

    <!-- Views Container -->
    <main class="flex-1 px-3 md:px-6 py-3 md:py-4">
      <div class="max-w-7xl mx-auto space-y-4">

        <!-- =====================================================
             DASHBOARD VIEW
        ====================================================== -->
        <section id="dashboardView" class="view">
          <div class="grid md:grid-cols-4 gap-3">
            <div class="col-span-2 md:col-span-1 bg-slate-900/70 border border-slate-800 rounded-3xl p-4">
              <p class="text-[11px] text-slate-400 mb-1">Toplam ÃœrÃ¼n</p>
              <p id="cardTotalProducts" class="text-2xl font-semibold text-slate-50">0</p>
              <p class="text-[11px] text-slate-500 mt-1">
                Firestoreâ€™daki <span class="font-mono">products</span> sayÄ±sÄ±
              </p>
            </div>
            <div class="col-span-2 md:col-span-1 bg-slate-900/70 border border-slate-800 rounded-3xl p-4">
              <p class="text-[11px] text-slate-400 mb-1">AÃ§Ä±k SipariÅŸ</p>
              <p id="cardOpenOrders" class="text-2xl font-semibold text-amber-300">0</p>
              <p class="text-[11px] text-slate-500 mt-1">
                Durumu <span class="font-mono">open / assigned</span> olanlar
              </p>
            </div>
            <div class="col-span-2 md:col-span-1 bg-slate-900/70 border border-slate-800 rounded-3xl p-4">
              <p class="text-[11px] text-slate-400 mb-1">ToplanÄ±yor</p>
              <p id="cardPickingOrders" class="text-2xl font-semibold text-sky-300">0</p>
              <p class="text-[11px] text-slate-500 mt-1">
                Durumu <span class="font-mono">picking</span> olan sipariÅŸler
              </p>
            </div>
            <div class="col-span-2 md:col-span-1 bg-slate-900/70 border border-slate-800 rounded-3xl p-4">
              <p class="text-[11px] text-slate-400 mb-1">Tamamlanan</p>
              <p id="cardCompletedOrders" class="text-2xl font-semibold text-emerald-300">0</p>
              <p class="text-[11px] text-slate-500 mt-1">
                Durumu <span class="font-mono">completed</span> olan sipariÅŸler
              </p>
            </div>
          </div>

          <div class="mt-4 grid md:grid-cols-3 gap-3">
            <div class="md:col-span-2 bg-slate-900/70 border border-slate-800 rounded-3xl p-4">
              <h2 class="text-xs font-semibold text-slate-200 mb-1">
                ToplayÄ±cÄ± PerformansÄ± (BugÃ¼n)
              </h2>
              <p id="pickerStatsToday" class="text-[11px] md:text-xs text-slate-400">
                BugÃ¼n henÃ¼z tamamlanan toplama yok.
              </p>
            </div>

            <div class="bg-slate-900/70 border border-slate-800 rounded-3xl p-4">
              <h2 class="text-xs font-semibold text-slate-200 mb-2">
                AraÃ§ YÃ¼kleme Ã–zeti
              </h2>
              <p id="loadingWaitingSummary" class="text-[11px] text-slate-400 mb-1">
                0 palet bekliyor.
              </p>
              <p id="loadingTodaySummary" class="text-[11px] text-slate-400">
                BugÃ¼n 0 palet yÃ¼klendi.
              </p>
            </div>
          </div>
        </section>

        <!-- =====================================================
             PRODUCTS VIEW
        ====================================================== -->
        <section id="productsView" class="view hidden">
          <div class="flex items-center justify-between mb-3">
            <div>
              <h2 class="text-sm font-semibold text-slate-100">ÃœrÃ¼n YÃ¶netimi</h2>
              <p class="text-[11px] text-slate-400">
                ÃœrÃ¼n ekleme / dÃ¼zenleme iÃ§in butona bas. Liste saÄŸ tarafta.
              </p>
            </div>
            <button
              id="openProductModalBtn"
              type="button"
              class="inline-flex items-center gap-1 rounded-full bg-emerald-500 hover:bg-emerald-400 text-xs font-semibold text-white px-3 py-1.5"
            >
              <span>ï¼‹</span> Yeni ÃœrÃ¼n
            </button>
          </div>

          <div class="grid md:grid-cols-3 gap-3">
            <div class="md:col-span-1 bg-slate-900/70 border border-slate-800 rounded-3xl p-4 text-[11px] text-slate-300">
              <p class="mb-1 font-semibold text-slate-100">Ä°pucu</p>
              <p class="mb-1">â€¢ <span class="font-mono">Kod</span> alanÄ±nÄ± Mikroâ€™daki stok koduyla uyumlu tut.</p>
              <p class="mb-1">â€¢ <span class="font-mono">Raf / Lokasyon</span> alanÄ± toplama rotasÄ±nÄ± hÄ±zlandÄ±rmak iÃ§in kullanÄ±lÄ±r.</p>
              <p>â€¢ <span class="font-mono">Stok</span> alanÄ± hÄ±zlÄ± demo iÃ§in tutuluyor; gerÃ§ek kullanÄ±mda Mikro entegrasyonu ile beslenebilir.</p>
            </div>

            <div class="md:col-span-2 bg-slate-900/70 border border-slate-800 rounded-3xl p-3 overflow-hidden">
              <div class="overflow-auto max-h-[60vh]">
                <table class="min-w-full text-xs">
                  <thead class="bg-slate-900/90 sticky top-0">
                    <tr>
                      <th class="px-3 py-2 text-left text-[11px] text-slate-400">Kod</th>
                      <th class="px-3 py-2 text-left text-[11px] text-slate-400">ÃœrÃ¼n AdÄ±</th>
                      <th class="px-3 py-2 text-left text-[11px] text-slate-400">Birim</th>
                      <th class="px-3 py-2 text-left text-[11px] text-slate-400">Raf</th>
                      <th class="px-3 py-2 text-left text-[11px] text-slate-400">Stok</th>
                      <th class="px-3 py-2 text-right text-[11px] text-slate-400">Ä°ÅŸlemler</th>
                    </tr>
                  </thead>
                  <tbody id="productsTableBody" class="divide-y divide-slate-800"></tbody>
                </table>
              </div>
              <p id="productsEmpty" class="text-[11px] text-slate-500 mt-2">
                HenÃ¼z Ã¼rÃ¼n yok. â€œYeni ÃœrÃ¼nâ€ butonuyla eklemeye baÅŸlayÄ±n.
              </p>
            </div>
          </div>
        </section>

        <!-- =====================================================
             STOCK VIEW
        ====================================================== -->
        <section id="stockView" class="view hidden">
          <div class="flex items-center justify-between mb-3">
            <div>
              <h2 class="text-sm font-semibold text-slate-100">Stok Hareketleri</h2>
              <p class="text-[11px] text-slate-400">
                GiriÅŸ / Ã§Ä±kÄ±ÅŸ / transfer hareketlerini yÃ¶net ve lokasyon stoklarÄ±nÄ± gÃ¼ncel tut.
              </p>
            </div>
          </div>

          <div class="grid lg:grid-cols-3 gap-3">
            <div class="lg:col-span-1 bg-slate-900/70 border border-slate-800 rounded-3xl p-4">
              <h3 class="text-xs font-semibold text-slate-200 mb-2">Yeni Stok Hareketi</h3>
              <form id="stockForm" class="space-y-3 text-[11px]">
                <div>
                  <label for="stockProductSelect" class="block mb-1 text-slate-300">ÃœrÃ¼n</label>
                  <select
                    id="stockProductSelect"
                    class="w-full rounded-2xl bg-slate-900 border border-slate-700 px-3 py-1.5 text-xs text-white"
                    required
                  ></select>
                </div>
                <div class="grid grid-cols-2 gap-2">
                  <div>
                    <label for="stockType" class="block mb-1 text-slate-300">Ä°ÅŸlem TÃ¼rÃ¼</label>
                    <select
                      id="stockType"
                      class="w-full rounded-2xl bg-slate-900 border border-slate-700 px-3 py-1.5 text-xs text-white"
                    >
                      <option value="in">GiriÅŸ</option>
                      <option value="out">Ã‡Ä±kÄ±ÅŸ</option>
                      <option value="transfer">Transfer</option>
                    </select>
                  </div>
                  <div>
                    <label for="stockQty" class="block mb-1 text-slate-300">Miktar</label>
                    <input
                      id="stockQty"
                      type="number"
                      min="0"
                      step="0.01"
                      class="w-full rounded-2xl bg-slate-900 border border-slate-700 px-3 py-1.5 text-xs text-white"
                      required
                    />
                  </div>
                </div>
                <div class="grid grid-cols-2 gap-2">
                  <div>
                    <label for="stockUnit" class="block mb-1 text-slate-300">Birim (opsiyonel)</label>
                    <input
                      id="stockUnit"
                      type="text"
                      placeholder="kg, adet..."
                      class="w-full rounded-2xl bg-slate-900 border border-slate-700 px-3 py-1.5 text-xs text-white"
                    />
                  </div>
                  <div>
                    <label for="stockSourceLocation" class="block mb-1 text-slate-300">Kaynak Lokasyon</label>
                    <input
                      id="stockSourceLocation"
                      type="text"
                      placeholder="A1-01-01"
                      class="w-full rounded-2xl bg-slate-900 border border-slate-700 px-3 py-1.5 text-xs text-white"
                    />
                  </div>
                </div>
                <div class="grid grid-cols-2 gap-2">
                  <div>
                    <label for="stockTargetLocation" class="block mb-1 text-slate-300">Hedef Lokasyon</label>
                    <input
                      id="stockTargetLocation"
                      type="text"
                      placeholder="A1-01-02"
                      class="w-full rounded-2xl bg-slate-900 border border-slate-700 px-3 py-1.5 text-xs text-white"
                    />
                  </div>
                  <div>
                    <label for="stockNote" class="block mb-1 text-slate-300">Not</label>
                    <input
                      id="stockNote"
                      type="text"
                      class="w-full rounded-2xl bg-slate-900 border border-slate-700 px-3 py-1.5 text-xs text-white"
                    />
                  </div>
                </div>
                <button
                  type="submit"
                  class="mt-1 w-full rounded-2xl bg-emerald-500 hover:bg-emerald-400 text-xs font-semibold text-white py-1.5"
                >
                  Hareket Kaydet
                </button>
              </form>
            </div>

            <div class="lg:col-span-2 bg-slate-900/70 border border-slate-800 rounded-3xl p-3">
              <h3 class="text-xs font-semibold text-slate-200 mb-1">Son Stok Hareketleri</h3>
              <div class="mt-2 space-y-2 max-h-[60vh] overflow-y-auto" id="stockMovementsList"></div>
              <p id="stockMovementsEmpty" class="text-[11px] text-slate-500 mt-2">
                HenÃ¼z stok hareketi yok.
              </p>
            </div>
          </div>
        </section>

        <!-- =====================================================
             ORDERS VIEW
        ====================================================== -->
        <section id="ordersView" class="view hidden">
          <div class="flex items-center justify-between mb-3">
            <div>
              <h2 class="text-sm font-semibold text-slate-100">Åube SipariÅŸleri</h2>
              <p class="text-[11px] text-slate-400">
                Åubeler sipariÅŸ girer, depo yÃ¶netici toplayÄ±cÄ±ya atar, toplayÄ±cÄ± toplar.
              </p>
            </div>
            <button
              id="openOrderModalBtn"
              type="button"
              class="inline-flex items-center gap-1 rounded-full bg-sky-500 hover:bg-sky-400 text-xs font-semibold text-white px-3 py-1.5"
            >
              ï¼‹ Yeni SipariÅŸ
            </button>
          </div>

          <div class="bg-slate-900/70 border border-slate-800 rounded-3xl p-3 overflow-hidden">
            <div class="overflow-auto max-h-[65vh]">
              <table class="min-w-full text-xs">
                <thead class="bg-slate-900/90 sticky top-0">
                  <tr>
                    <th class="px-3 py-2 text-left text-[11px] text-slate-400">No</th>
                    <th class="px-3 py-2 text-left text-[11px] text-slate-400">Åube</th>
                    <th class="px-3 py-2 text-left text-[11px] text-slate-400">Durum</th>
                    <th class="px-3 py-2 text-left text-[11px] text-slate-400">ToplayÄ±cÄ±</th>
                    <th class="px-3 py-2 text-left text-[11px] text-slate-400">Tarih</th>
                    <th class="px-3 py-2 text-right text-[11px] text-slate-400">Ä°ÅŸlemler</th>
                  </tr>
                </thead>
                <tbody id="ordersTableBody" class="divide-y divide-slate-800"></tbody>
              </table>
            </div>
            <p id="ordersEmpty" class="text-[11px] text-slate-500 mt-2">HenÃ¼z sipariÅŸ yok.</p>
          </div>
        </section>

        <!-- =====================================================
             PICKING VIEW
        ====================================================== -->
        <section id="pickingView" class="view hidden">
          <div class="flex items-center justify-between mb-3">
            <div>
              <h2 class="text-sm font-semibold text-slate-100">Toplama EkranÄ±</h2>
              <p class="text-[11px] text-slate-400">
                ToplayÄ±cÄ±ya atanmÄ±ÅŸ sipariÅŸler ve toplama detaylarÄ± burada.
              </p>
            </div>
          </div>

          <div class="grid lg:grid-cols-3 gap-3">
            <div class="lg:col-span-1 bg-slate-900/70 border border-slate-800 rounded-3xl p-4">
              <h3 class="text-xs font-semibold text-slate-200 mb-1">BugÃ¼nkÃ¼ PerformansÄ±n</h3>
              <p class="text-[11px] text-slate-400">
                DetaylÄ± performans kartÄ±nÄ± Panel sekmesinde gÃ¶rebilirsin.
              </p>
            </div>

            <div class="lg:col-span-2 bg-slate-900/70 border border-slate-800 rounded-3xl p-3 overflow-hidden">
              <div class="overflow-auto max-h-[60vh]">
                <table class="min-w-full text-xs">
                  <thead class="bg-slate-900/90 sticky top-0">
                    <tr>
                      <th class="px-3 py-2 text-left text-[11px] text-slate-400">No</th>
                      <th class="px-3 py-2 text-left text-[11px] text-slate-400">Åube</th>
                      <th class="px-3 py-2 text-left text-[11px] text-slate-400">Durum</th>
                      <th class="px-3 py-2 text-left text-[11px] text-slate-400">ToplayÄ±cÄ±</th>
                      <th class="px-3 py-2 text-right text-[11px] text-slate-400">Ä°ÅŸlemler</th>
                    </tr>
                  </thead>
                  <tbody id="pickingTableBody" class="divide-y divide-slate-800"></tbody>
                </table>
              </div>
              <p id="pickingEmpty" class="text-[11px] text-slate-500 mt-2">
                Åu anda atanmÄ±ÅŸ sipariÅŸ bulunmuyor.
              </p>
            </div>
          </div>
        </section>

        <!-- =====================================================
             LOADING VIEW
        ====================================================== -->
        <section id="loadingView" class="view hidden">
          <div class="flex items-center justify-between mb-3">
            <div>
              <h2 class="text-sm font-semibold text-slate-100">AraÃ§ YÃ¼kleme</h2>
              <p class="text-[11px] text-slate-400">
                Palet bazlÄ± yÃ¼kleme gÃ¶revlerini yÃ¶net (pallets koleksiyonu).
              </p>
            </div>
            <div class="flex items-center gap-2">
              <select
                id="loadingStatusFilter"
                class="rounded-full bg-slate-900 border border-slate-700 px-3 py-1.5 text-[11px] text-slate-200"
              >
                <option value="all">TÃ¼mÃ¼</option>
                <option value="waiting">Bekliyor</option>
                <option value="loading">YÃ¼kleniyor</option>
                <option value="loaded">YÃ¼klendi</option>
              </select>
              <button
                id="reloadLoadingTasksBtn"
                type="button"
                class="rounded-full bg-slate-900 border border-slate-700 px-3 py-1.5 text-[11px] text-slate-200 hover:bg-slate-800"
              >
                Yenile
              </button>
            </div>
          </div>

          <div class="bg-slate-900/70 border border-slate-800 rounded-3xl p-3 overflow-hidden">
            <div class="overflow-auto max-h-[65vh]">
              <table class="min-w-full text-xs">
                <thead class="bg-slate-900/90 sticky top-0">
                  <tr>
                    <th class="px-2 py-2 text-left text-[11px] text-slate-400">Sevk No</th>
                    <th class="px-2 py-2 text-left text-[11px] text-slate-400 hidden sm:table-cell">Åube</th>
                    <th class="px-2 py-2 text-left text-[11px] text-slate-400">Palet</th>
                    <th class="px-2 py-2 text-left text-[11px] text-slate-400 hidden md:table-cell">Peron</th>
                    <th class="px-2 py-2 text-left text-[11px] text-slate-400">Durum</th>
                    <th class="px-2 py-2 text-left text-[11px] text-slate-400 hidden md:table-cell">YÃ¼kleyen</th>
                    <th class="px-2 py-2 text-left text-[11px] text-slate-400 hidden md:table-cell">Saat</th>
                    <th class="px-2 py-2 text-right text-[11px] text-slate-400">Ä°ÅŸlemler</th>
                  </tr>
                </thead>
                <tbody id="loadingTasksTableBody" class="divide-y divide-slate-800"></tbody>
              </table>
            </div>
            <p id="loadingTasksEmpty" class="text-[11px] text-slate-500 mt-2">
              YÃ¼kleme gÃ¶revi bulunamadÄ±.
            </p>
          </div>
        </section>

        <!-- =====================================================
             REPORTS VIEW
        ====================================================== -->
        <section id="reportsView" class="view hidden">
          <div class="flex items-center justify-between mb-3">
            <div>
              <h2 class="text-sm font-semibold text-slate-100">Raporlar ve Ã–zetler</h2>
              <p class="text-[11px] text-slate-400">
                Basit Ã¶zetler: toplam Ã¼rÃ¼n, sipariÅŸ sayÄ±sÄ±, tamamlanan sipariÅŸler.
              </p>
            </div>
          </div>

          <div class="grid md:grid-cols-3 gap-3">
            <div class="bg-slate-900/70 border border-slate-800 rounded-3xl p-4 text-[11px] text-slate-300">
              <p id="reportTotalProducts" class="font-semibold text-slate-100 mb-1">Toplam Ã¼rÃ¼n: 0</p>
              <p class="text-slate-400">Firestoreâ€™daki <span class="font-mono">products</span> adedi.</p>
            </div>
            <div class="bg-slate-900/70 border border-slate-800 rounded-3xl p-4 text-[11px] text-slate-300">
              <p id="reportTotalOrders" class="font-semibold text-slate-100 mb-1">Toplam sipariÅŸ: 0</p>
              <p class="text-slate-400">TÃ¼m durumlarda aÃ§Ä±lmÄ±ÅŸ sipariÅŸ sayÄ±sÄ±.</p>
            </div>
            <div class="bg-slate-900/70 border border-slate-800 rounded-3xl p-4 text-[11px] text-slate-300">
              <p id="reportCompletedOrders" class="font-semibold text-slate-100 mb-1">Tamamlanan sipariÅŸ: 0</p>
              <p class="text-slate-400">
                Durumu <span class="font-mono">completed</span> olan sipariÅŸ adedi.
              </p>
            </div>
          </div>
        </section>
      </div>
    </main>
  </div>
</section>

<!-- =========================================================
     MODALS
========================================================= -->

<!-- ÃœRÃœN MODALI -->
<div
  id="productModal"
  class="hidden fixed inset-0 z-40 flex items-center justify-center bg-slate-950/80 backdrop-blur"
>
  <div class="w-full max-w-lg bg-slate-900 border border-slate-800 rounded-3xl p-4 md:p-5">
    <div class="flex items-center justify-between mb-3">
      <h3 id="productModalTitle" class="text-sm font-semibold text-slate-100">Yeni ÃœrÃ¼n</h3>
      <button id="closeProductModalBtn" type="button" class="text-slate-400 hover:text-slate-100 text-lg">âœ•</button>
    </div>

    <form id="productForm" class="space-y-3 text-[11px]">
      <input type="hidden" id="productId" />
      <div class="grid grid-cols-2 gap-2">
        <div>
          <label for="productCode" class="block text-slate-300 mb-1">ÃœrÃ¼n Kodu</label>
          <input
            id="productCode"
            type="text"
            class="w-full rounded-2xl bg-slate-950 border border-slate-700 px-3 py-1.5 text-xs text-white"
            required
          />
        </div>
        <div>
          <label for="productUnit" class="block text-slate-300 mb-1">Birim</label>
          <input
            id="productUnit"
            type="text"
            placeholder="kg, adet..."
            class="w-full rounded-2xl bg-slate-950 border border-slate-700 px-3 py-1.5 text-xs text-white"
          />
        </div>
      </div>
      <div>
        <label for="productName" class="block text-slate-300 mb-1">ÃœrÃ¼n AdÄ±</label>
        <input
          id="productName"
          type="text"
          class="w-full rounded-2xl bg-slate-950 border border-slate-700 px-3 py-1.5 text-xs text-white"
          required
        />
      </div>
      <div class="grid grid-cols-2 gap-2">
        <div>
          <label for="productShelf" class="block text-slate-300 mb-1">Raf / Lokasyon</label>
          <input
            id="productShelf"
            type="text"
            placeholder="A1-01-01"
            class="w-full rounded-2xl bg-slate-950 border border-slate-700 px-3 py-1.5 text-xs text-white"
          />
        </div>
        <div>
          <label for="productStock" class="block text-slate-300 mb-1">BaÅŸlangÄ±Ã§ Stok</label>
          <input
            id="productStock"
            type="number"
            min="0"
            class="w-full rounded-2xl bg-slate-950 border border-slate-700 px-3 py-1.5 text-xs text-white"
          />
        </div>
      </div>
      <div>
        <label for="productNote" class="block text-slate-300 mb-1">Not</label>
        <input
          id="productNote"
          type="text"
          class="w-full rounded-2xl bg-slate-950 border border-slate-700 px-3 py-1.5 text-xs text-white"
        />
      </div>

      <div class="flex justify-end gap-2 pt-2">
        <button type="button" id="cancelProductBtn" class="px-3 py-1.5 rounded-full bg-slate-800 text-[11px] text-slate-200">
          Ä°ptal
        </button>
        <button type="submit" class="px-3 py-1.5 rounded-full bg-emerald-500 hover:bg-emerald-400 text-[11px] font-semibold text-white">
          Kaydet
        </button>
      </div>
    </form>
  </div>
</div>

<!-- SÄ°PARÄ°Å MODALI -->
<div
  id="orderModal"
  class="hidden fixed inset-0 z-40 flex items-center justify-center bg-slate-950/80 backdrop-blur"
>
  <div class="w-full max-w-3xl bg-slate-900 border border-slate-800 rounded-3xl p-4 md:p-5">
    <div class="flex items-center justify-between mb-3">
      <h3 class="text-sm font-semibold text-slate-100">Yeni Åube SipariÅŸi</h3>
      <button id="closeOrderModalBtn" type="button" class="text-slate-400 hover:text-slate-100 text-lg">âœ•</button>
    </div>

    <form id="orderForm" class="space-y-3 text-[11px]">
      <div class="grid md:grid-cols-3 gap-2">
        <div class="md:col-span-2">
          <label for="orderBranchName" class="block text-slate-300 mb-1">Åube AdÄ±</label>
          <input
            id="orderBranchName"
            type="text"
            class="w-full rounded-2xl bg-slate-950 border border-slate-700 px-3 py-1.5 text-xs text-white"
            required
          />
        </div>
        <div>
          <label for="orderDocumentNo" class="block text-slate-300 mb-1">Belge No (opsiyonel)</label>
          <input
            id="orderDocumentNo"
            type="text"
            class="w-full rounded-2xl bg-slate-950 border border-slate-700 px-3 py-1.5 text-xs text-white"
          />
        </div>
      </div>

      <div>
        <label for="orderNote" class="block text-slate-300 mb-1">Genel Not</label>
        <input
          id="orderNote"
          type="text"
          class="w-full rounded-2xl bg-slate-950 border border-slate-700 px-3 py-1.5 text-xs text-white"
        />
      </div>

      <!-- Excel Import BLOÄU (eksiltmeden eklendi) -->
      <div class="bg-slate-950/40 border border-slate-800 rounded-2xl p-3">
        <div class="flex items-start justify-between gap-3">
          <div>
            <p class="text-[11px] font-semibold text-slate-200">Excelâ€™den SipariÅŸ YÃ¼kle</p>
            <p class="text-[11px] text-slate-400">
              .xlsx seÃ§, sistem satÄ±rlarÄ± okuyup sipariÅŸ + kalemleri otomatik oluÅŸturur.
            </p>
          </div>
          <div class="flex gap-2">
            <button
              type="button"
              id="downloadExcelTemplateBtn"
              class="text-[11px] px-3 py-1.5 rounded-full bg-slate-800 text-slate-100 hover:bg-slate-700"
              title="Ã–rnek ÅŸablon indir"
            >
              Åablon Ä°ndir
            </button>
            <button
              type="button"
              id="importOrderFromExcelBtn"
              class="text-[11px] px-3 py-1.5 rounded-full bg-emerald-600 text-white hover:bg-emerald-500"
              title="Excel'i iÃ§e aktar"
            >
              Excel YÃ¼kle
            </button>
          </div>
        </div>

        <div class="mt-2 grid md:grid-cols-3 gap-2 items-center">
          <div class="md:col-span-2">
            <input
              id="orderExcelFile"
              type="file"
              accept=".xlsx,.xls"
              class="w-full text-[11px] text-slate-200 file:mr-3 file:rounded-full file:border-0 file:bg-slate-800 file:px-3 file:py-1.5 file:text-[11px] file:text-slate-100 hover:file:bg-slate-700"
            />
          </div>
          <div id="orderExcelImportResult" class="text-[11px] text-slate-300"></div>
        </div>

        <div class="mt-2 text-[11px] text-slate-400">
          Beklenen kolonlar (esnek): <span class="font-mono">sube/ÅŸube</span>, <span class="font-mono">belgeNo</span>,
          <span class="font-mono">stokKodu</span>, <span class="font-mono">stokAdi</span>, <span class="font-mono">miktar</span>, <span class="font-mono">aciklama</span>
        </div>
      </div>

      <div class="mt-2">
        <div class="flex items-center justify-between mb-1">
          <p class="text-[11px] text-slate-300 font-semibold">SipariÅŸ Kalemleri</p>
          <button
            type="button"
            id="addOrderItemBtn"
            class="text-[11px] px-2 py-1 rounded-full bg-slate-800 text-slate-100 hover:bg-slate-700"
          >
            ï¼‹ SatÄ±r Ekle
          </button>
        </div>
        <div id="orderItemsContainer" class="space-y-2 max-h-64 overflow-y-auto"></div>
        <p id="orderItemsEmpty" class="text-[11px] text-slate-500 mt-1">
          HenÃ¼z satÄ±r yok. â€œSatÄ±r Ekleâ€ ile Ã¼rÃ¼n seÃ§ip miktar gir.
        </p>
      </div>

      <div class="flex justify-end gap-2 pt-2">
        <button type="button" id="cancelOrderBtn" class="px-3 py-1.5 rounded-full bg-slate-800 text-[11px] text-slate-200">
          Ä°ptal
        </button>
        <button type="submit" class="px-3 py-1.5 rounded-full bg-sky-500 hover:bg-sky-400 text-[11px] font-semibold text-white">
          SipariÅŸi Kaydet
        </button>
      </div>
    </form>
  </div>
</div>

<!-- TOPLAMA DETAY MODALI -->
<div
  id="pickingDetailModal"
  class="hidden fixed inset-0 z-40 flex items-center justify-center bg-slate-950/80 backdrop-blur"
>
  <div class="w-full max-w-5xl bg-slate-900 border border-slate-800 rounded-3xl p-4 md:p-5 max-h-[90vh] overflow-y-auto">
    <div class="flex items-center justify-between mb-3">
      <h3 class="text-sm font-semibold text-slate-100">Toplama DetayÄ±</h3>
      <button id="closePickingDetailModalBtn" type="button" class="text-slate-400 hover:text-slate-100 text-lg">âœ•</button>
    </div>

    <div id="pickingDetailContent" class="space-y-2 text-[11px]">
      <!-- JS tarafÄ±ndan doldurulacak -->
    </div>

    <div class="flex justify-end gap-2 pt-4">
      <button
        type="button"
        id="completePickingBtn"
        class="px-3 py-1.5 rounded-full bg-emerald-500 hover:bg-emerald-400 text-[11px] font-semibold text-white"
      >
        ToplamayÄ± Tamamla
      </button>
    </div>
  </div>
</div>

<!-- =========================================================
     APP SCRIPT
========================================================= -->
<script type="module" src="app.js"></script>

<!-- =========================================================
     MINI UI SCRIPT (Sadece HTML tarafÄ±: Bildirim paneli aÃ§/kapat)
     app.js iÃ§indeki asÄ±l listener'lar duruyor; bu sadece panel gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼
========================================================= -->
<script>
  (function () {
    const btn = document.getElementById("notificationsBtn");
    const panel = document.getElementById("notificationsPanel");
    const markRead = document.getElementById("notificationsMarkReadBtn");

    function togglePanel() {
      if (!panel) return;
      panel.classList.toggle("hidden");
      if (btn) btn.setAttribute("aria-expanded", panel.classList.contains("hidden") ? "false" : "true");
    }

    function hidePanel() {
      if (!panel) return;
      panel.classList.add("hidden");
      if (btn) btn.setAttribute("aria-expanded", "false");
    }

    if (btn) {
      btn.addEventListener("click", (e) => {
        e.stopPropagation();
        togglePanel();
      });
    }

    // DÄ±ÅŸarÄ± tÄ±klanÄ±nca kapat
    document.addEventListener("click", (e) => {
      if (!panel || panel.classList.contains("hidden")) return;
      const within = panel.contains(e.target) || (btn && btn.contains(e.target));
      if (!within) hidePanel();
    });

    // Escape ile kapat
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") hidePanel();
    });

    // "Hepsini okundu yap" butonu: app.js iÃ§inde markNotificationsAsRead var,
    // bu HTML script sadece paneli kapatsÄ±n, asÄ±l iÅŸi app.js yapar.
    if (markRead) {
      markRead.addEventListener("click", () => {
        // panel aÃ§Ä±k kalsÄ±n istersen silersin
      });
    }
  })();
</script>
</body>
</html>
